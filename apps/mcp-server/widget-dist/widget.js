(function(){"use strict";function x(){var n,e,t;try{return(t=(e=(n=window.openai)==null?void 0:n.toolOutput)==null?void 0:e.todos)!=null?t:[]}catch(o){return[]}}function i(n,e={},t=[]){const o=document.createElement(n);for(const[d,a]of Object.entries(e))d==="style"&&typeof a=="object"?Object.assign(o.style,a):d.startsWith("on")&&typeof a=="function"?o[d.toLowerCase()]=a:a!=null&&o.setAttribute(d,String(a));for(const d of t)o.append(d instanceof Node?d:document.createTextNode(d));return o}const y=document.getElementById("root"),g=i("div",{id:"app",style:{padding:"12px",maxWidth:"560px",margin:"0 auto",fontFamily:"system-ui,-apple-system,Segoe UI,Roboto,sans-serif"}}),w=i("h3",{},["My Todos"]),c=i("form",{id:"f",style:{display:"flex",gap:"8px",marginBottom:"12px"}}),p=i("input",{id:"t",placeholder:"Add a taskâ€¦",style:{flex:"1",padding:"8px 10px",borderRadius:"8px",border:"1px solid #444",background:"#111",color:"#eee"}}),b=i("button",{type:"submit",style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #444",background:"#222",color:"#eee"}},["Add"]),l=i("div",{id:"list",style:{display:"grid",gap:"10px"}});c.append(p,b),g.append(w,c,l),y.innerHTML="",y.append(g);function u(n=x()){if(l.innerHTML="",!n.length){l.append(i("div",{style:{color:"#aaa"}},["No tasks yet."]));return}for(const e of n){const t=i("div",{class:"row",style:{display:"flex",alignItems:"center",gap:"10px"}}),o=i("input",{type:"checkbox"});o.checked=e.done,o.addEventListener("change",async()=>{var s,r;await((r=(s=window.openai)==null?void 0:s.callTool)==null?void 0:r.call(s,"toggle_todo",{id:e.id})),await f()});const d=i("span",{style:{flex:"1",textDecoration:e.done?"line-through":"none",opacity:e.done?"0.5":"1"}},[e.text]),a=i("button",{style:{padding:"6px 10px",borderRadius:"8px",border:"1px solid #444",background:"#222",color:"#eee"}},["Delete"]);a.addEventListener("click",async()=>{var s,r;await((r=(s=window.openai)==null?void 0:s.callTool)==null?void 0:r.call(s,"delete_todo",{id:e.id})),await f()}),t.append(o,d,a),l.append(t)}}async function f(){var t,o,d,a;const n=await((o=(t=window.openai)==null?void 0:t.callTool)==null?void 0:o.call(t,"list_todos",{})),e=(a=(d=n==null?void 0:n.structuredContent)==null?void 0:d.todos)!=null?a:x();u(e)}c.addEventListener("submit",async n=>{var t,o;n.preventDefault();const e=p.value.trim();e&&(p.value="",await((o=(t=window.openai)==null?void 0:t.callTool)==null?void 0:o.call(t,"add_todo",{text:e})),await f())}),window.addEventListener("openai:set_globals",()=>u()),u()})();
